var _$=function(e){this.nodeList=document.querySelectorAll(e)};_$.prototype.hide=function(e){for(var n=this.nodeList,t=0;t<n.length;t++)n[t].style.display="none";return this},_$.prototype.show=function(e){for(var n=this.nodeList,t=0;t<n.length;t++)n[t].style.display="block";return this},_$.prototype.removeClass=function(e){for(var n=this.nodeList,t=0;t<n.length;t++)n[t].classList.remove(e);return this},_$.prototype.addClass=function(e){for(var n=this.nodeList,t=0;t<n.length;t++)n[t].classList.add(e);return this},_$.prototype.bind=function(e,n){for(var t=this.nodeList,r=0;r<t.length;r++)t[r].addEventListener(e,function(e){n(e)});return this};var $=function(e){return new _$(e)},showMaster=function(e){var n=$(".master-item."+e);$("#branch_wrap, .branch").hide(),$("#master_wrap").show(),$(".master-item").hide().removeClass("restore"),n.show(),setTimeout(function(){n.addClass("restore")})},showBranch=function(e){$("#master_wrap, .master-item").hide().removeClass("restore"),$("#branch_wrap").show(),$(".branch").hide(),$(".branch."+e).show()},restart=function(){$(".page-wrap").hide(),$("#master_wrap, .master-item").hide().removeClass("restore"),$("#branch_wrap, .branch").hide(),$(".page-wrap.start").show()},toFail=function(){$(".page-wrap").hide(),$("#master_wrap, .master-item").hide().removeClass("restore"),$("#branch_wrap, .branch").hide(),$(".page-wrap.fail").show()},showFormError=function(){var e=$(".page-wrap.form .info");e.show(),setTimeout(function(){e.hide()},2e3)};$(".page-wrap.start .btn").bind("click",function(){$(".page-wrap").hide(),showMaster("a")}),$(".page-wrap.success .btn").bind("click",function(){$(".page-wrap.success").hide(),$(".page-wrap.award").show()}),$(".page-wrap.award .btn").bind("click",function(){$(".page-wrap.award").hide(),$(".page-wrap.form").show()}),$(".page-wrap.form form").bind("submit",function(e){var n=document.querySelector('.page-wrap.form .form-input[name="name"]').value,t=document.querySelector('.page-wrap.form .form-input[name="tel"]').value,r=document.querySelector('.page-wrap.form .form-input[name="job"]').value;return n&&t&&r?($(".page-wrap.form").hide(),$(".page-wrap.end").show()):showFormError(),e.preventDefault(),!1}),$(".page-wrap.fail .btn").bind("click",function(){restart()}),$(".master-item.a .btn.a").bind("click",function(){showBranch("a")}),$(".master-item.b .btn.a").bind("click",function(){showBranch("b")}),$(".master-item.c .btn.a").bind("click",function(){showBranch("c")}),$(".master-item.d .btn.a").bind("click",function(){showBranch("d")}),$(".master-item.e .btn.a").bind("click",function(){showBranch("e")}),$(".master-item.f .btn.a").bind("click",function(){showBranch("f")}),$(".btn.choice.b, .btn.choice.c").bind("click",function(){toFail()}),$(".branch.a .btn").bind("click",function(){showMaster("b")}),$(".branch.b .btn").bind("click",function(){showMaster("c")}),$(".branch.c .btn").bind("click",function(){showMaster("d")}),$(".branch.d .btn").bind("click",function(){showMaster("e")}),$(".branch.e .btn").bind("click",function(){showMaster("f")}),$(".branch.f .btn").bind("click",function(){$("#branch_wrap").hide(),$(".page-wrap.success").show()});var loadImg=function(e,n){var t="build/image/"+e,r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(e){var t=new Blob([this.response]),r=window.URL.createObjectURL(t);n&&n(r)},r.send()},loadImgOrder=function(e,n){loadImg("test_num_"+e+".png",function(e){"string"==typeof n&&(n=[n]);for(var t=0;t<n.length;t++){document.querySelector(".master-item."+n[t]+" .board-title-bg").style.backgroundImage="url("+e+")"}})},loadImgBoard=function(e,n){loadImg("test_ques_bg_"+e+".png",function(e){document.querySelector(".master-item."+n+" .board-wrap").style.backgroundImage="url("+e+")"})},loadImgBg=function(e,n,t){loadImg("test_bg_"+e+".png",function(e){document.querySelector(".master-item."+n).style.backgroundImage="url("+e+")",t&&t()})},loadImgAd=function(e,n,t){loadImg("poster_bg_"+e+".png",function(e){document.querySelector(".branch."+n+" .branch-bg").setAttribute("src",e),t&&t()})},loadImgGroup=function(e,n,t){loadImgOrder(e,n),loadImgBoard(e,n),loadImgBg(e,n,function(){loadImgAd(e,n,function(){t&&t()})})},setBgStyle=function(e,n){document.querySelector(e).style.backgroundImage="url("+n+")"},preloadImage=function(){loadImgOrder("one",["a","f"]),loadImgBoard("one","a"),loadImgBg("one","a",function(){loadImg("failed_bg.gif",function(e){setBgStyle(".page-wrap.fail",e)}),loadImgAd("one","a",function(){loadImgGroup("two","b",function(){loadImgGroup("three","c",function(){loadImgGroup("four","d",function(){loadImgGroup("five","e",function(){loadImgBoard("six","f"),loadImgBg("six","f"),loadImgAd("six","f",function(){loadImg("pass_bg.png",function(e){setBgStyle(".page-wrap.success",e),loadImg("reward_bg_reward.png",function(e){setBgStyle(".page-wrap.award",e),loadImg("reward_bg_two.png",function(e){setBgStyle(".page-wrap.form",e),setBgStyle(".page-wrap.end",e),loadImg("reward_icon_share.png",function(e){setBgStyle(".page-wrap.end .end-share-icon",e)}),loadImg("reward_erweima.png",function(e){document.querySelector(".page-wrap.end .end-nav-pic img").setAttribute("src",e)})})})})})})})})})})})};restart(),preloadImage();